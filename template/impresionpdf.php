<?phprequire_once('../lib/html2pdf/html2pdf.class.php');require_once('../lib/jpgraph/jpgraph.php');require_once('../lib/jpgraph/jpgraph_pie.php');include "../core/ConexionMySQL.php";$id = $_GET['id'];if($id == '1' || $id == '2' || $id == '3' || $id == '4'){	$html =	  '<html>'.	  '<head>'.		'</head>'.				'<body>';	switch($id){		case '1'://Cantidad de pasajes vendidos			$titulo = 'Cantidad de pasajes vendidos';			$query = 'SELECT COUNT(*) as Pasajes FROM pasaje;';		break;		case '2'://Cantidad de pasajes vendidos por categoría:			$titulo = 'Cantidad de pasajes vendidos por categoría';			$query = 'select Categoria, count(*) as Cantidad '.					'from pasaje  '.					'group by categoria; ';		break;		case '3'://Cantidad de pasajes vendidos  por destino:			$titulo = 'Cantidad de pasajes vendidos  por destino';			$query = 'select a.ciudad as \'Ciudad destino\', count(*) as Cantidad '.					'from pasaje as p join vuelo as v on p.id_vuelo=v.id_vuelo join recorrido as r on v.id_recorrido=r.id_recorrido join aeropuerto as a on a.ciudad=r.id_ciudad_destino '.					'group by a.ciudad; ';		break;		case '4'://Cantidad de reservas caídas:			$titulo = 'Cantidad de reservas caídas';			$query = 'select count(*) as \'Reservas caídas\' '.					'from pasaje as p join vuelo as v on p.id_vuelo=v.id_vuelo '.					'where p.id_estado=0 and v.fecha<DATE(NOW()); ';		break;	}	$conexion = new ConexionMySQL();	$matriz = $conexion->ejecutarQuery($query);	$html .=  "<h1>".$titulo."</h1>";	if(count($matriz)){		$html .=  '<table border=1 cellpadding="' . $conexion->field_count() . '" cellspacing=0>';		$html .=  '<tr>		         		<th colspan=5 style="text-align:center;vertical-align:middle">'.$titulo.'</th>         			</tr>		       		<tr>';	   	foreach ($matriz[0] as $key => $value) {			$html .=  '<th style="text-align:center;vertical-align:middle">'. $key ." </th>";	   	}		$html .= "</tr>";		/*Y ahora todos los registros */		for ($i=0; $i < count($matriz); $i++) {	 		$html .=  "<tr>";			$registro = $matriz[$i];		 	foreach ($registro as $key => $value) {		 		$html .=  '<td style="text-align:center;vertical-align:middle">'. $value ."</td>";			}	    	$html .=  "</tr>";		}		$html .=  "</table>";		$html .=  "<img src='http://localhost/grafico?id=".$id."'/>";		$html .= '</body></html>';				$html2pdf = new HTML2PDF('P','A4','fr');	    $html2pdf->WriteHTML($html);	    $html2pdf->Output($titulo.".pdf");	}else{		$html .= "<h1>Sin Resultados</h1>";		$html .= '</body></html>';		echo $html;	}      }?>